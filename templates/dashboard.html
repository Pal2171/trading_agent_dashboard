{% extends "base.html" %}

{% block title %}Dashboard - Trading Agent{% endblock %}

{% block content %}
<div style="display: flex; flex-direction: column; gap: 1.5rem;">

    <!-- 1. Performance Metrics -->
    <article class="card">
        <div style="margin-bottom: 1rem;">
            <h2>ðŸ“Š Performance Overview</h2>
            <p class="card-subtitle">Metriche chiave delle performance del trading bot.</p>
        </div>
        <div id="performance-metrics-panel" hx-get="/ui/performance-metrics" hx-trigger="load, every 30s">
            <div aria-busy="true">Caricamento metriche...</div>
        </div>
    </article>

    <!-- 2. Equity Curve -->
    <article class="card">
        <div style="margin-bottom: 1rem;">
            <h2>ðŸ’¹ Equity Curve</h2>
            <p class="card-subtitle">Andamento del valore del portafoglio nel tempo.</p>
        </div>
        <div id="balance-panel" hx-get="/ui/balance" hx-trigger="load, every 60s">
            <div aria-busy="true">Caricamento grafico...</div>
        </div>
    </article>

    <!-- 3. Win/Loss Metrics -->
    <article class="card">
        <div style="margin-bottom: 1rem;">
            <h2>ðŸŽ¯ Operazioni Vinte/Perse</h2>
            <p class="card-subtitle">Statistiche sulle operazioni chiuse.</p>
        </div>
        <div id="win-loss-metrics-panel" hx-get="/ui/win-loss-metrics" hx-trigger="load, every 30s">
            <div aria-busy="true">Caricamento metriche...</div>
        </div>
    </article>

    <!-- 3.5. Last AI Operations Carousel -->
    <article class="card">
        <div style="margin-bottom: 1rem;">
            <h2>ðŸ¤– Ultime Analisi AI</h2>
            <p class="card-subtitle">Ultima operazione analizzata dall'AI per ogni valuta (incluso HOLD).</p>
        </div>
        <div id="last-operations-panel" hx-get="/ui/last-operations-by-symbol" hx-trigger="load, every 30s">
            <div aria-busy="true">Caricamento analisi...</div>
        </div>
    </article>

    <!-- 4. Open Positions Table -->
    <article class="card">
        <div class="flex-between" style="margin-bottom: 1rem;">
            <div>
                <h2>ðŸŽ¯ Posizioni Aperte</h2>
                <p class="card-subtitle">Panoramica delle posizioni attualmente attive a mercato.</p>
            </div>
        </div>
        <div id="open-positions-row" hx-get="/ui/open-positions" hx-trigger="load, every 30s">
            <div aria-busy="true">Caricamento posizioni...</div>
        </div>
    </article>

    <!-- 5. Sentiment & News -->
    <article class="card">
        <div style="margin-bottom: 1rem;">
            <h2>ðŸ“ˆ Sentiment & News</h2>
            <p class="card-subtitle">Fear & Greed Index e ultime notizie crypto.</p>
        </div>
        <div id="sentiment-news-panel" hx-get="/ui/sentiment-news" hx-trigger="load, every 60s">
            <div aria-busy="true">Caricamento sentiment e news...</div>
        </div>
    </article>

</div>

<style>
    @media (max-width: 968px) {
        div[style*="grid-template-columns: 1fr 1fr"] {
            grid-template-columns: 1fr !important;
        }
    }
</style>
{% endblock %}